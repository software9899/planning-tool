# TURN Server Configuration for Virtual Office WebRTC Voice Chat

# Listen on all interfaces
listening-ip=0.0.0.0

# Listening port for TURN/STUN
listening-port=3478

# TLS listening port
tls-listening-port=5349

# External IP address - Required for TURN to work properly
# Replace with your actual server IP (DigitalOcean droplet IP)
external-ip=68.183.227.173

# Use fingerprint for TURN messages
fingerprint

# TURN server realm (domain)
realm=virtualoffice.local

# Log to stdout (Docker will capture this)
log-file=stdout

# Disable RFC5780 support (not needed for basic WebRTC)
no-rfc5780
no-stun-backward-compatibility
response-origin-only-with-rfc5780

# User credentials for TURN authentication
# Format: username:password
user=virtualoffice:yourSecretPassword123

# Use long-term credential mechanism
lt-cred-mech

# Relay port range (smaller range to avoid conflicts)
# 40 ports should be enough for small-medium usage
min-port=49160
max-port=49200

# Enable verbose logging for debugging (can be disabled in production)
verbose

# Deny access from private IP ranges (security)
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=100.64.0.0-100.127.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.0.0.0-192.0.0.255
denied-peer-ip=192.0.2.0-192.0.2.255
denied-peer-ip=192.88.99.0-192.88.99.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=198.18.0.0-198.19.255.255
denied-peer-ip=198.51.100.0-198.51.100.255
denied-peer-ip=203.0.113.0-203.0.113.255
denied-peer-ip=240.0.0.0-255.255.255.255

# Allow TURN server to work with clients behind NAT
mobility

# Disable CLI (not needed in Docker)
no-cli
